@using Demo.Data
@using Demo.Data.Models
@inject NavigationManager Nav
@inject UserState UserState

<MudNavMenu>
    <MudNavLink Href="/" Icon="@Icons.Material.Filled.Home" Match="NavLinkMatch.All">Inicio</MudNavLink>
    <MudNavLink Href="/mis-pedidos" Icon="@Icons.Material.Filled.List" Disabled="@(UserState.Usuario==null)">Mis pedidos</MudNavLink>
    <MudNavLink Href="/hacerse-socio" Icon="@Icons.Material.Filled.CardMembership">Hacerse socio</MudNavLink>
    @if (UserState.Usuario == null)
    {
        <MudNavLink Href="/login" Icon="@Icons.Material.Filled.Login">Iniciar sesión</MudNavLink>
        <MudNavLink Href="/registro" Icon="@Icons.Material.Filled.PersonAdd">Registrarse</MudNavLink>
    }
    else
    {
        @if (UserState.Usuario.Rol == Rol.Administrador)
        {
            <MudNavLink Href="/admin" Icon="@Icons.Material.Filled.AdminPanelSettings">Administración</MudNavLink>
        }
        <MudNavLink Href="" OnClick="Logout" Icon="@Icons.Material.Filled.ExitToApp">Cerrar sesión</MudNavLink>
    }
</MudNavMenu>

@code {
    private void Logout()
    {
        UserState.Logout();
        Nav.NavigateTo("/");
    }
}
